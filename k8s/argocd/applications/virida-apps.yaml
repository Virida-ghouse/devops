# ðŸš€ VIRIDA ArgoCD Applications
# DÃ©finition des applications pour le dÃ©ploiement GitOps

---
# Application Frontend 3D Visualizer
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: frontend-3d-visualizer
  namespace: argocd
  labels:
    app.kubernetes.io/name: frontend-3d-visualizer
    app.kubernetes.io/part-of: virida
    app.kubernetes.io/component: frontend
spec:
  project: default
  source:
    repoURL: https://gitea.virida.local/frontend/3d-visualizer.git
    targetRevision: HEAD
    path: k8s
  destination:
    server: https://kubernetes.default.svc
    namespace: virida-apps
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
      - CreateNamespace=true
      - PrunePropagationPolicy=foreground
      - PruneLast=true
  revisionHistoryLimit: 10
---
# Application Frontend Dashboard
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: frontend-dashboard
  namespace: argocd
  labels:
    app.kubernetes.io/name: frontend-dashboard
    app.kubernetes.io/part-of: virida
    app.kubernetes.io/component: frontend
spec:
  project: default
  source:
    repoURL: https://gitea.virida.local/frontend/dashboard.git
    targetRevision: HEAD
    path: k8s
  destination:
    server: https://kubernetes.default.svc
    namespace: virida-apps
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
      - CreateNamespace=true
      - PrunePropagationPolicy=foreground
      - PruneLast=true
  revisionHistoryLimit: 10
---
# Application Backend API Gateway
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: backend-api-gateway
  namespace: argocd
  labels:
    app.kubernetes.io/name: backend-api-gateway
    app.kubernetes.io/part-of: virida
    app.kubernetes.io/component: backend
spec:
  project: default
  source:
    repoURL: https://gitea.virida.local/backend/api-gateway.git
    targetRevision: HEAD
    path: k8s
  destination:
    server: https://kubernetes.default.svc
    namespace: virida-apps
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
      - CreateNamespace=true
      - PrunePropagationPolicy=foreground
      - PruneLast=true
  revisionHistoryLimit: 10
---
# Application Backend User Service
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: backend-user-service
  namespace: argocd
  labels:
    app.kubernetes.io/name: backend-user-service
    app.kubernetes.io/part-of: virida
    app.kubernetes.io/component: backend
spec:
  project: default
  source:
    repoURL: https://gitea.virida.local/backend/user-service.git
    targetRevision: HEAD
    path: k8s
  destination:
    server: https://kubernetes.default.svc
    namespace: virida-apps
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
      - CreateNamespace=true
      - PrunePropagationPolicy=foreground
      - PruneLast=true
  revisionHistoryLimit: 10
---
# Application AI/ML Prediction Engine
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: ai-ml-prediction-engine
  namespace: argocd
  labels:
    app.kubernetes.io/name: ai-ml-prediction-engine
    app.kubernetes.io/part-of: virida
    app.kubernetes.io/component: ai-ml
spec:
  project: default
  source:
    repoURL: https://gitea.virida.local/ai-ml/prediction-engine.git
    targetRevision: HEAD
    path: k8s
  destination:
    server: https://kubernetes.default.svc
    namespace: virida-apps
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
      - CreateNamespace=true
      - PrunePropagationPolicy=foreground
      - PruneLast=true
  revisionHistoryLimit: 10
---
# Application Infrastructure (PostgreSQL, Redis)
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: infrastructure
  namespace: argocd
  labels:
    app.kubernetes.io/name: infrastructure
    app.kubernetes.io/part-of: virida
    app.kubernetes.io/component: infrastructure
spec:
  project: default
  source:
    repoURL: https://gitea.virida.local/devops/infrastructure.git
    targetRevision: HEAD
    path: k8s
  destination:
    server: https://kubernetes.default.svc
    namespace: virida-system
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
      - CreateNamespace=true
      - PrunePropagationPolicy=foreground
      - PruneLast=true
  revisionHistoryLimit: 10
---
# Application Monitoring (Prometheus, Grafana)
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: monitoring
  namespace: argocd
  labels:
    app.kubernetes.io/name: monitoring
    app.kubernetes.io/part-of: virida
    app.kubernetes.io/component: monitoring
spec:
  project: default
  source:
    repoURL: https://gitea.virida.local/devops/monitoring.git
    targetRevision: HEAD
    path: k8s
  destination:
    server: https://kubernetes.default.svc
    namespace: virida-monitoring
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
      - CreateNamespace=true
      - PrunePropagationPolicy=foreground
      - PruneLast=true
  revisionHistoryLimit: 10
---
# Application Ingress Controller (NGINX)
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: ingress-controller
  namespace: argocd
  labels:
    app.kubernetes.io/name: ingress-controller
    app.kubernetes.io/part-of: virida
    app.kubernetes.io/component: infrastructure
spec:
  project: default
  source:
    repoURL: https://gitea.virida.local/devops/ingress-controller.git
    targetRevision: HEAD
    path: k8s
  destination:
    server: https://kubernetes.default.svc
    namespace: virida-system
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
      - CreateNamespace=true
      - PrunePropagationPolicy=foreground
      - PruneLast=true
  revisionHistoryLimit: 10
---
# Application Cert Manager (SSL/TLS)
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: cert-manager
  namespace: argocd
  labels:
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/part-of: virida
    app.kubernetes.io/component: infrastructure
spec:
  project: default
  source:
    repoURL: https://gitea.virida.local/devops/cert-manager.git
    targetRevision: HEAD
    path: k8s
  destination:
    server: https://kubernetes.default.svc
    namespace: cert-manager
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
      - CreateNamespace=true
      - PrunePropagationPolicy=foreground
      - PruneLast=true
  revisionHistoryLimit: 10
---
# Application HashiCorp Vault (Secrets Management)
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: vault
  namespace: argocd
  labels:
    app.kubernetes.io/name: vault
    app.kubernetes.io/part-of: virida
    app.kubernetes.io/component: security
spec:
  project: default
  source:
    repoURL: https://gitea.virida.local/devops/vault.git
    targetRevision: HEAD
    path: k8s
  destination:
    server: https://kubernetes.default.svc
    namespace: virida-system
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
      - CreateNamespace=true
      - PrunePropagationPolicy=foreground
      - PruneLast=true
  revisionHistoryLimit: 10
---
# Application Jaeger (Distributed Tracing)
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: jaeger
  namespace: argocd
  labels:
    app.kubernetes.io/name: jaeger
    app.kubernetes.io/part-of: virida
    app.kubernetes.io/component: observability
spec:
  project: default
  source:
    repoURL: https://gitea.virida.local/devops/jaeger.git
    targetRevision: HEAD
    path: k8s
  destination:
    server: https://kubernetes.default.svc
    namespace: virida-monitoring
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
      - CreateNamespace=true
      - PrunePropagationPolicy=foreground
      - PruneLast=true
  revisionHistoryLimit: 10
---
# Application Elasticsearch (Logs)
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: elasticsearch
  namespace: argocd
  labels:
    app.kubernetes.io/name: elasticsearch
    app.kubernetes.io/part-of: virida
    app.kubernetes.io/component: observability
spec:
  project: default
  source:
    repoURL: https://gitea.virida.local/devops/elasticsearch.git
    targetRevision: HEAD
    path: k8s
  destination:
    server: https://kubernetes.default.svc
    namespace: virida-monitoring
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
      - CreateNamespace=true
      - PrunePropagationPolicy=foreground
      - PruneLast=true
  revisionHistoryLimit: 10

